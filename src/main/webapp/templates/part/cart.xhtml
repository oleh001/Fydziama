<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view>
    <!--CART-->
    <h:form id="cartUser">
        <article id="cart">
            <h2>#{msg.your} <span>#{msg.cart}</span></h2>
            <hr/>
            <hr/>
            <div id="cart-header">
                <p>#{msg.product}</p>
                <p>#{msg.description}</p>
                <p>#{msg.price}</p>
                <p>#{msg.quantity}</p>
                <p>#{msg.subtotal}</p>
                <p>#{msg.checkout_cart_remove_from_cart}</p>
            </div>
            <ul>
                <!--CART ITEM-->
                <p:repeat value="#{orderDetailController.showOrderDetByOrder()}" var="orderDet">
                    <li>
                        <div class="circle tiny">
                            <figure class="imgLiquidFill">
                                <o:graphicImage name="images/menu-00.jpg" alt="#{msg.dish}" dataURI="true"/>
                            </figure>
                            <div class="shadow"/>
                            <div class="fill #{goodController.getStyleCircle(orderDet.good)}"/>
                        </div>
                        <div class="description">
                            <p:link styleClass="classh6" outcome="dishDetail" value="#{orderDet.good.name}" fragment="item-detail">
                                <f:param name="dishId" value="#{orderDet.good.idGood}"/>
                            </p:link>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit sed do eiusmod temp</p>
                        </div>
                        <h6 class="price-small">#{msg.price}:</h6>
                        <h6>$<span>#{orderDet.good.price} &#8372;</span></h6>
                        <div class="quantity cart_ul_li_div_quantity">

                            <p:spinner min="0" max="99" id="cartQuantity" value="#{orderDet.quantity}" styleClass="counter">
                                <p:ajax listener="#{orderDetailController.updateQuantitySubtotal(orderDet)}"
                                        update="cartUser @([id$=ticket]) @([id$=menuCheckout])"/>
                            </p:spinner>
                        </div>
                        <h6 class="subtotal-small">#{msg.subtotal}:</h6>
                        <h6>$<span id="cartSubtotal">#{orderDet.good.price * orderDet.quantity}</span></h6>

                        <p:commandLink class="remove"
                                       action="#{orderDetailController.deleteAction()}"
                                       update="@([id$=cartUser])"
                        >
                            <f:setPropertyActionListener value="#{orderDet}"
                                                         target="#{orderDetailController.selectedOrderDetail}"/>
                            <o:graphicImage name="images/remove-cart.png" alt="remove" dataURI="true"/>
                        </p:commandLink>

                    </li>
                </p:repeat>

            </ul>
        </article>
    </h:form>
    <!--/CART-->
</f:view>
</html>
